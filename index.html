<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç²’å­åœ£è¯æ ‘</title>
    <!-- ä¿®æ­£Three.jsåŠæ§åˆ¶å™¨å¼•å…¥è·¯å¾„ï¼ˆé€‚é…0.132.2ç‰ˆæœ¬ï¼‰ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }
        .info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #fff;
            font-family: "å¾®è½¯é›…é»‘", Arial, sans-serif;
            font-size: 18px;
            z-index: 100;
        }
        .error-tip {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff4444;
            font-family: "å¾®è½¯é›…é»‘";
            display: none;
        }
    </style>
</head>
<body>
    <div class="info">Merry Christmas ğŸ„</div>
    <div class="error-tip" id="errorTip">å½“å‰ç¯å¢ƒä¸æ”¯æŒWebGLï¼Œæ— æ³•æ¸²æŸ“3Dæ•ˆæœ</div>
    <script>
        // å…¼å®¹æ€§æ£€æµ‹ï¼šWebGLæ˜¯å¦å¯ç”¨
        if (!THREE.WEBGL.isWebGLAvailable()) {
            document.getElementById('errorTip').style.display = 'block';
            throw new Error('WebGL is not available');
        }

        // åˆå§‹åŒ–åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨
        const scene = new THREE.Scene();
        // è°ƒæ•´ç›¸æœºå‚æ•°ï¼šæ›´é€‚é…ç§»åŠ¨ç«¯+åœ£è¯æ ‘è§†è§’
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 2, 8); // è°ƒæ•´ç›¸æœºä½ç½®ï¼Œæ›´æ˜“çœ‹åˆ°å®Œæ•´åœ£è¯æ ‘

        const renderer = new THREE.WebGLRenderer({ 
            antialias: true,
            alpha: true // é€æ˜èƒŒæ™¯ï¼ˆå¯é€‰ï¼‰
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x000000, 1); // é»‘è‰²èƒŒæ™¯
        document.body.appendChild(renderer.domElement);

        // ç”Ÿæˆç²’å­æ•°é‡ï¼ˆé€‚é…ç§»åŠ¨ç«¯æ€§èƒ½ï¼‰
        const particleCount = 5000; 
        const geometry = new THREE.BufferGeometry();
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);

        // åœ£è¯æ ‘å½¢çŠ¶å‚æ•°ï¼ˆé”¥å½¢+åˆ†å±‚ï¼Œæ›´è´´è¿‘çœŸå®åœ£è¯æ ‘ï¼‰
        const maxHeight = 6;    // æ ‘æ€»é«˜åº¦
        const maxRadius = 2.5;  // æ ‘æœ€å¤§åŠå¾„ï¼ˆåº•éƒ¨ï¼‰

        // ç”Ÿæˆåœ£è¯æ ‘é”¥å½¢ç²’å­ï¼ˆæ ¸å¿ƒä¿®æ­£ï¼šä»çƒå½¢æ”¹ä¸ºé”¥å½¢ï¼‰
        for (let i = 0; i < particleCount; i++) {
            // åˆ†å±‚ç”Ÿæˆï¼šyè½´ä»0åˆ°maxHeightï¼ˆå‘ä¸Šï¼‰
            const y = Math.random() * maxHeight;
            // åŠå¾„éšé«˜åº¦é€’å‡ï¼ˆé”¥å½¢ï¼‰ï¼šyè¶Šå¤§ï¼ŒåŠå¾„è¶Šå°
            const currentRadius = maxRadius * (1 - y / maxHeight);
            // æ°´å¹³æ–¹å‘éšæœºè§’åº¦
            const angle = Math.random() * Math.PI * 2;
            // æ°´å¹³åæ ‡ï¼ˆx/zï¼‰
            const x = Math.cos(angle) * currentRadius * Math.random();
            const z = Math.sin(angle) * currentRadius * Math.random();

            // èµ‹å€¼ç²’å­ä½ç½®ï¼ˆä¿®æ­£yè½´æ–¹å‘ï¼Œä»0å‘ä¸Šç”Ÿé•¿ï¼‰
            positions[i * 3] = x;
            positions[i * 3 + 1] = y - maxHeight/2; // å±…ä¸­æ˜¾ç¤º
            positions[i * 3 + 2] = z;

            // ç²‰è‰²ç³»é…è‰²ï¼ˆä¿®æ­£æ•°å€¼ï¼Œæ›´è´´è¿‘åœ£è¯ç²‰ï¼‰
            colors[i * 3] = 1.0;    // çº¢
            colors[i * 3 + 1] = 0.7; // ç»¿
            colors[i * 3 + 2] = 0.8; // è“
        }

        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        // ç²’å­æè´¨ä¼˜åŒ–ï¼ˆæå‡æ¸²æŸ“æ•ˆæœï¼‰
        const material = new THREE.PointsMaterial({
            size: 0.08,          // ç²’å­å¤§å°ï¼ˆé€‚é…ç§»åŠ¨ç«¯ï¼‰
            vertexColors: true,  // ä½¿ç”¨é¡¶ç‚¹é¢œè‰²
            transparent: true,   // é€æ˜
            opacity: 0.9,        // ä¸é€æ˜åº¦
            sizeAttenuation: true // ç²’å­å¤§å°éšè·ç¦»è¡°å‡ï¼ˆæ›´çœŸå®ï¼‰
        });

        const particles = new THREE.Points(geometry, material);
        scene.add(particles);

        // è½¨é“æ§åˆ¶å™¨ï¼ˆä¼˜åŒ–äº¤äº’ä½“éªŒï¼‰
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // é˜»å°¼ï¼ˆé¡ºæ»‘æ‹–åŠ¨ï¼‰
        controls.dampingFactor = 0.05;
        controls.minDistance = 3;      // æœ€å°ç¼©æ”¾è·ç¦»
        controls.maxDistance = 15;     // æœ€å¤§ç¼©æ”¾è·ç¦»

        // åŠ¨ç”»å¾ªç¯ï¼ˆå¢åŠ ç²’å­è½»å¾®æ—‹è½¬ï¼Œæå‡åŠ¨æ„Ÿï¼‰
        function animate() {
            requestAnimationFrame(animate);
            // åœ£è¯æ ‘ç¼“æ…¢æ—‹è½¬
            particles.rotation.y += 0.002;
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // çª—å£å¤§å°é€‚é…ï¼ˆä¿®æ­£é€»è¾‘ï¼‰
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
